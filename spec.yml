name: test-cache-steps-2
description: Add Hello World to READMEs

# Find all repositories that contain a README.md file.
on:
  - repositoriesMatchingQuery: file:README.md select:repo

# In each repository, run this command. Each repository's resulting diff is captured.
steps:
  - run: echo Hello World | tee -a README.md
    container: ubuntu:20.04
  - run: echo ${{ previous_step.modified_files }} | tee -a change.txt
    container: ubuntu:18.04
  - run: echo Hello World 2 | tee -a README2.md
    container: ubuntu:18.04
  - run: echo ${{ previous_step.added_files }} | tee -a change.txt
    container: ubuntu:18.04

# Describe the changeset (e.g., GitHub pull request) you want for each repository.
changesetTemplate:
  title: Hello World
  body: My first batch change!
  branch: hello-world # Push the commit to this branch.
  commit:
    message: Append Hello World to all README.md files
